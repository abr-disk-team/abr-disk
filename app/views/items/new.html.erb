<!-- ヘッダー -->
<% if user_signed_in? && current_user.admin %>
    <%= render 'template/admin_header' %>
<% elsif user_signed_in? %>
    <%= render 'template/user_header' %>
<% else %>
    <%= render 'template/visiter_header' %>
<% end %>

<div class="container">

    <% if @item.errors.any? %>
        <h3><%= @item.errors.count %> errors prohibited this obj from being saved:</h3>
        <div id="error_explanation" class="alert alert-danger">
            <ul>
                <% @item.errors.full_messages.each do |message| %>
                    <li><%= message %></li>
                <% end %>
            </ul>
        </div>
    <% end %>

    <div class="row">
        <div class="col-lg-4 col-xs-12">
            <div class="row">
                <div class="item">
                    <%= attachment_image_tag @item, :jacket_image, :fill, 200, 200, format: 'jpeg', fallback: "no_image.jpg", size:'200x200', class: "img-rounded img-thumbnail" %>
                </div>
                <br>

                <%= form_for(@item) do |f| %>
                    <div class="field">
                    <%= f.label :jacket_image, "ジャケット画像" %>
                    <%= f.attachment_field :jacket_image, placeholder: "ジャケット画像" %>
                    </div>
                <br>
                <div class="field">
                    <%= f.label :price, "価格" %>
                <br>
                    <%= f.number_field :price, {class: 'col-lg-12 col-xs-12'} %>
                </div>
                <br>
                <div class="field">
                    <%= f.label :stock, "在庫数" %>
                <br>
                    <%= f.number_field :stock, {class: 'col-lg-12 col-xs-12'} %>
                </div>
                <br>
                <div class="field">
                    <%= f.label :genre_id, "ジャンル" %>
                <br>
                    <%= f.select :genre_id, Genre.all.collect { |p| [ p.genre, p.id ] }, {include_blank: true}, {class: 'col-lg-12 col-xs-12'} %>
                </div>
                <br>
                <div class="field">
                    <%= f.label :label_id, "レーベル" %>
                <br>
                    <%= f.select :label_id,  Label.all.collect { |p| [ p.label, p.id ] }, {include_blank: true}, {class: 'col-lg-12 col-xs-12'} %>
                </div>
            </div>
        </div>

        <div class="col-lg-5 col-xs-12">
            <div class="field">
                <%= f.label :cd_name, "タイトル" %>
            <br>
                <%= f.text_field :cd_name, {class: 'col-lg-12 col-xs-12'} %>
            </div>
            <br>
            <div class="field">
                <%= f.label "アーティスト" %>
            <br>
                <%= f.select  :artist_id,  Artist.all.collect { |p| [ p.artist, p.id ] }, {include_blank: true}, {class: 'col-lg-12 col-xs-12'} %>
            </div>
            <br>
                <%= f.label "曲一覧" %>
                <div id="discs">
                    <%= f.fields_for :discs do |disc| %>
                        <%= render 'disc_fields', f: disc %>
                    <% end %>
                    <div class="links btn btn-default btn-lg col-xs-4">
                        <%= link_to_add_association 'ディスク追加', f, :discs %>
                    </div>
                </div>
        </div>

        <div class="col-lg-3 col-xs-12">
                <div class="actions">
                    <%= f.submit '登録する', class: "btn btn-default btn-lg col-xs-12" %>
                </div>
            <% end %>
        </div>
    </div>
</div>


<!-- フッター -->
<%= render 'template/footer' %>

